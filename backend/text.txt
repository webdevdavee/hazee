I want you to write a proper test for this contract

 Below is my initial test setup, work with it import { expect } from "chai"; import { ethers } from "hardhat"; import { NFT, NFTfactory, NFTAuction, NFTAuctionfactory, NFTCollections, NFTCollectionsfactory, NFTCreators, NFTCreatorsfactory, } from "../../typechain-types"; import { SignerWithAddress } from "@nomicfoundation/hardhat-ethers/signers"; import { time } from "@nomicfoundation/hardhat-network-helpers"; import { ContractTransactionReceipt, Log } from "ethers"; describe("NFTCollections", function () { let nftAuction: NFTAuction; let nftCollections: NFTCollections; let nftCreators: NFTCreators; let nft: NFT; let nftFactory: NFTfactory; let owner: SignerWithAddress; let addr1: SignerWithAddress; let addr2: SignerWithAddress; let nftContractAddress: SignerWithAddress; const TWELVE_HOURS = 12  60  60; const ONE_WEEK = 7  24  60 * 60; beforeEach(async function () { [owner, addr1, addr2, nftContractAddress] = await ethers.getSigners(); // Deploy NFTCreators const nftCreatorsFactory = (await ethers.getContractFactory( "NFTCreators" )) as unknown as NFTCreatorsfactory; nftCreators = await nftCreatorsFactory.deploy(); // Deploy NFTAuction const nftAuctionFactory = (await ethers.getContractFactory( "NFTAuction" )) as unknown as NFTAuctionfactory; nftAuction = await nftAuctionFactory.deploy( nftContractAddress, await nftCreators.getAddress() ); // Deploy NFTCollections const nftCollectionsFactory = (await ethers.getContractFactory( "NFTCollections" )) as unknown as NFTCollectionsfactory; nftCollections = await nftCollectionsFactory.deploy( await nftCreators.getAddress(), await nftAuction.getAddress() ); // Register creators await nftCreators.connect(owner).registerCreator(); await nftCreators.connect(addr1).registerCreator(); await nftCreators.connect(addr2).registerCreator(); }); I do not like this const event = receipt?.logs.find( (log) => log.fragment?.name === "CollectionAdded" ); 

If you are checking for events, use the recent version to check for it. log.fragment and event.args do not exist in recent versions of ethers. Do not use them.

Here is my package.json, so you know what versions to work with { "name": "hazee", "devDependencies": { "@nomicfoundation/hardhat-toolbox": "^5.0.0", "@types/chai": "^4.3.17", "@types/mocha": "^10.0.7", "dotenv": "^16.4.5", "ethers": "^6.13.2", "hardhat": "^2.22.8" }, "dependencies": { "@openzeppelin/contracts": "^5.0.2" } }

Be smart and careful